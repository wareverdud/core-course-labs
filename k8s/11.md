## Task 1

```sh
kubectl create secret generic my-secret --from-literal=scr='lab11secret'
secret/my-secret created
```

```sh
kubectl get secret my-secret 
NAME        TYPE     DATA   AGE
my-secret   Opaque   1      49s
```

```sh
kubectl get secret my-secret -o jsonpath='{.data.scr}' | base64 -d
lab11secret
```

```sh
helm install python .\python-app\
kubectl get po
NAME                                READY   STATUS      RESTARTS   AGE
postinstall-hook                    0/1     Completed   0          36s
preinstall-hook                     0/1     Completed   0          59s
python-python-app-d8579488d-vlg8d   1/1     Running     0          36s
```

```sh
kubectl exec python-python-app-d8579488d-vlg8d -- printenv | grep MY_PASS
MY_PASS=lab11
```

## Task 2

```sh
helm install vault hashicorp/vault --set "server.dev.enabled=true"
LAST DEPLOYED: Sun Nov 19 03:43:34 2023
STATUS: deployed
REVISION: 1
NOTES:
Thank you for installing HashiCorp Vault!

Now that you have deployed Vault, you should look over the docs on using
Vault with Kubernetes available here:

https://developer.hashicorp.com/vault/docs


Your release is named vault. To learn more about the release, try:

  $ helm status vault
  $ helm get manifest vault
```

```sh
kubectl exec -it vault-0 -- /bin/sh
/ $ vault secrets enable -path=internal kv-v2
Success! Enabled the kv-v2 secrets engine at: internal/
/ $ vault kv put internal/database/config username="username" password="password"
======== Secret Path ========
internal/data/database/config

======= Metadata =======
Key                Value
---                -----
created_time       2023-11-19T00:47:12.123590235Z
custom_metadata    <nil>
deletion_time      n/a
destroyed          false
version            1
/ $ vault kv get internal/database/config
======== Secret Path ========
internal/data/database/config

======= Metadata =======
Key                Value
---                -----
created_time       2023-11-19T00:47:12.123590235Z
custom_metadata    <nil>
deletion_time      n/a
destroyed          false
version            1

====== Data ======
Key         Value
---         -----
password    password
username    username
```

```sh
/ $ vault auth enable kubernetes
Success! Enabled kubernetes auth method at: kubernetes/
/ $ vault write auth/kubernetes/config \
Success! Data written to: auth/kubernetes/config
/ $ vault policy write internal-app - <<EOF
> path "internal/data/database/config" {
>    capabilities = ["read"]
> EOF
Success! Uploaded policy: internal-app
/ $ vault write auth/kubernetes/role/internal-app \
>       bound_service_account_names=internal-app \
>       policies=internal-app \
>       ttl=24h
Success! Data written to: auth/kubernetes/role/internal-app
/ $ exit
```